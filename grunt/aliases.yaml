
# Default build for dev
default:
    - newer:jshint:dev
    - newer:jscs
    - newer:replace
    - stylus:dev
    - newer:copy
    - newer:jade:index
    - concat
    - autoprefixer
    - html2js:dev
    - ngAnnotate



# Default build without usage of newer
devall:
    - clean:build
    - jshint:dev
    - jscs
    - replace
    - stylus:dev
    - copy
    - jade:index
    - concat
    - autoprefixer
    - html2js:dev
    - ngAnnotate



# Distribution build: same as defaultAll + uglify
dist:
    - clean:build
    - jshint:dist
    - jscs
    - replace
    - stylus:dist
    - copy
    - jade:index
    - concat
    - autoprefixer
    - ngAnnotate
    - html2js:dist
    - uglify:dist



# Generate documentation and stats
doc:
    - clean:doc
    - groc
    - plato



# Build then start a web server and open index.html
serve:
  - devall
  - connect:keepalive

# Build then start a web server, a watcher and open index.html
wserve:
  - devall
  - concurrent:serve



# Build then launch karma in single run mode for Chrome and Firefox
test:
  - devall
  - karma:dev

# Build then launch karma in watch mode for Chrome only and a watcher (chokidar).
# Usually you want to test in one browser while developping and test all others after.
wtest:
  - devall
  - concurrent:wtest




# Build then launch a web server (connect) and protractor in single run mode for Chrome and Firefox
test_e2e:
  - devall
  - connect:singlerun
  - protractor

# TODO write a generic task that will launch connect only if it is not running.
# Find a way to launch protractor from grunt